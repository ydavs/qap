
param n, integer ; 

set I := 1..n ; 
set J := 1..n ; 
set K := 1..n ; 
set L := 1..n ; 

param a{i in I, j in J}, integer ; 
param b{i in I, j in J}, integer ; 

var y{i in I, j in J, k in K, l in L}, >=0; 

minimize cost: sum{i in I, j in J, k in K, l in L} a[i,k]*b[j,l]*y[i,j,k,l] ; 
s.t. ra{i in I, j in J, k in K, l in L}: y[i,j,k,l] = y[k,l,i,j] ; 
s.t. rb{i in I, j in J, l in L:j!=l}: y[i,j,i,l] = 0 ; 
s.t. rc{i in I, j in J, l in L:j!=l}: y[j,i,l,i] = 0 ; 
s.t. rd{i in I, j in J, l in L}: sum{k in K} y[i, j, k, l] = y[i,j,i,j] ; 
s.t. re{i in I, j in J, l in L}: sum{k in K} y[i, j, l, k] = y[i,j,i,j] ;
s.t. rf{i in I}: sum{j in J} y[i,j,i,j] = 1 ;
s.t. rg{i in I}: sum{j in J} y[j,i,j,i] = 1 ; 

data ; 

param n := 20;

param a: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 := 
1  0  1  2  2  3  4  4  5  3  5  6  7  8  9  7  8  4  5  3 10
2  1  0  1  1  2  3  3  4  2  4  5  6  7  8  6  7  3  4  2  9
3  2  1  0  2  1  2  2  3  1  3  4  5  6  7  5  6  2  3  1  8
4  2  1  2  0  1  2  2  3  3  3  4  5  6  7  5  6  4  5  3  8
5  3  2  1  1  0  1  1  2  2  2  3  4  5  6  4  5  3  4  2  7
6  4  3  2  2  1  0  2  3  3  1  2  3  4  5  3  4  4  5  3  6
7  4  3  2  2  1  2  0  1  3  1  2  3  4  5  3  4  4  5  1  6
8  5  4  3  3  2  3  1  0  4  2  1  2  3  4  2  3  5  6  2  5
9  3  2  1  3  2  3  3  4  0  4  5  6  7  8  6  7  1  2  2  9
10  5  4  3  3  2  1  1  2  4  0  1  2  3  4  2  3  5  6  2  5
11  6  5  4  4  3  2  2  1  5  1  0  1  2  3  1  2  6  7  3  4
12  7  6  5  5  4  3  3  2  6  2  1  0  1  2  2  3  7  8  4  3
13  8  7  6  6  5  4  4  3  7  3  2  1  0  1  1  2  8  9  5  2
 14 9  8  7  7  6  5  5  4  8  4  3  2  1  0  2  1  9 10  6  1
15  7  6  5  5  4  3  3  2  6  2  1  2  1  2  0  1  7  8  4  3
16  8  7  6  6  5  4  4  3  7  3  2  3  2  1  1  0  8  9  5  2
17  4  3  2  4  3  4  4  5  1  5  6  7  8  9  7  8  0  1  3 10
18  5  4  3  5  4  5  5  6  2  6  7  8  9 10  8  9  1  0  4 11
19 3  2  1  3  2  3  1  2  2  2  3  4  5  6  4  5  3  4  0  7
20 10  9  8  8  7  6  6  5  9  5  4  3  2  1  3  2 10 11  7  0 ;

 
param b: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 :=
1  0  3  4  6  8  5  6  6  5  1  4  6  1  5  4  5  6  8  9  4
2  3  0  6  3  7  9  9  2  2  7  4  7  9  6  3  2  6  6  5  6
3  4  6  0  2  6  4  4  4  2  6  3  6  5  6  2  6  5  7  6  5
4  6  3  2  0  5  5  3  3  9  4  3  6  3  4  7  8  3  2  5  5
5  8  7  6  5  0  4  3  4  5  7  6  7  7  3  3  3  4  4  5  5
6  5  9  4  5  4  0  8  5  5  5  7  5  1  8  5  4  3  3  6  4
7  6  9  4  3  3  8  0  6  8  4  6  7  1  8  5  6  7  6  3  9
8  6  2  4  3  4  5  6  0  1  5  5  3  7  5  9  4  4  4  5  2
9  5  2  2  9  5  5  8  1  0  4  5  2  4  5  4  5  4  7  5  3
10  1  7  6  4  7  5  4  5  4  0  7  7  5  6  5  5  6 10  6  7
11  4  4  3  3  6  7  6  5  5  7  0  9  6  5  1  8  5  3  4  6
12  6  7  6  6  7  5  7  3  2  7  9  0  6  5  4  5  4  6  8  2
13  1  9  5  3  7  1  1  7  4  5  6  6  0  5  7  4  5  2  3  7
14  5  6  6  4  3  8  8  5  5  6  5  5  5  0  5  3  2  4  8  3
15  4  3  2  7  3  5  5  9  4  5  1  4  7  5  0  8  5  6  7  1
16  5  2  6  8  3  4  6  4  5  5  8  5  4  3  8  0  6  8  7  3
17  6  6  5  3  4  3  7  4  4  6  5  4  5  2  5  6  0  3  7  7
18  8  6  7  2  4  3  6  4  7 10  3  6  2  4  6  8  3  0  5  6
19  9  5  6  5  5  6  3  5  5  6  4  8  3  8  7  7  7  5  0  4
20  4  6  5  5  5  4  9  2  3  7  6  2  7  3  1  3  7  6  4  0 ;
